# CubWebAppBot
<img src="http://cp82453.tmweb.ru/public_images/cubbot.jpg"> 

## Этот бот помогает считать договорную зарплату определенной компании по периодам. Рабочая версия  @CubatureBot.

### Переменные окружения
- В корне у файла ".env.example" удалите  ".examle" или добавьте свой файл ".env"

### Создание бота
- Создайте бота, написав @BotFather в Telegram
- скопируйте токен бота и добавьте в файл .env

### Туннель к локальному хосту
- Установите ngrok https://ngrok.com/download
- Зарегистрируйтесь чтобы позволить передавать html-контент
- В терминале:
<code> ngrok http 5000 </code>
- Ngrok сообщит https адрес хоста, сохраните его

### Webapp кнопка
- Снова обратитесь к BotFather с командой /setmenubutton
- Когда он попросит ссылку дайте ссылку на ngrok host
- Далее он попросит название кнопки, введите произвольное

### Настройки приложения
- адрес хоста ngrok добавьте в .env в ALLOWED_HOSTS в конец списка через пробел без протокола(https://)
- по необходимости можете менять ALLOWED_HOSTS
- придумайте секретный ключ и добавьте там же в SECRET_KEY
- там же в разделе db можно при желании сменить пользователя, пароль, название бд, но соответственно придется изменить в файле docker-compose.yml

### Запуск контейнеров
- В корне выполните комманду
<code>docker-compose up --build</code>
- Для остановки используйте <code>docker stop</code>

### Как работать
- Обратитесь к вашему боту и нажмите на кнопку веб-приложения
- Для логина в проекте есть тестовый пользователь - user1 testpass1
- Готово!